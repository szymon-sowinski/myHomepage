{% extends "base.html" %}
{% block content %}

<!-- Responsive Navbar -->
<header class="fixed top-0 left-0 w-full z-50 bg-[var(--bg)] border-b border-white/5 group">
  <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
    <div class="text-xl font-semibold text-indigo-400">Szymon Sowiński - wizytówka</div>
    <button id="navToggle" class="md:hidden text-white dark:text-white light:text-black focus:outline-none">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white dark:text-white transition-colors duration-300" fill="none"
        viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round"
          stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
    <nav id="navMenu" class="hidden md:flex space-x-6 text-white dark:text-white group-[.light]:text-gray-800 group-[.light]:group-text-gray-800">
      <a href="#hero" class="hover:text-indigo-400 transition">Start</a>
      <a href="#about" class="hover:text-indigo-400 transition">O mnie</a>
      <a href="#projects" class="hover:text-indigo-400 transition">Projekty</a>
      <a href="#contact" class="hover:text-indigo-400 transition">Kontakt</a>
    </nav>
  </div>
  <div id="mobileMenu" class="md:hidden hidden px-6 pb-4 space-y-2 bg-[var(--bg)] text-white dark:text-white group-[.light]:text-gray-800 group-[.light]:group-text-gray-800 transition-all duration-300 transform scale-95 opacity-0 origin-top overflow-hidden max-h-0">
    <a href="#hero" class="block hover:text-indigo-400 transition opacity-0 translate-y-4 duration-500 delay-[100ms]">Start</a>
    <a href="#about" class="block hover:text-indigo-400 transition opacity-0 translate-y-4 duration-500 delay-[200ms]">O mnie</a>
    <a href="#projects" class="block hover:text-indigo-400 transition opacity-0 translate-y-4 duration-500 delay-[300ms]">Projekty</a>
    <a href="#contact" class="block hover:text-indigo-400 transition opacity-0 translate-y-4 duration-500 delay-[400ms]">Kontakt</a>
  </div>
</header>

<!-- Hero -->
<section id="hero"
  class="relative min-h-screen flex items-center justify-center overflow-hidden bg-[var(--bg)] isolate">
  <!-- Animated Gradient Blurs -->
  <div class="absolute inset-0 z-0 overflow-hidden">
    <div
      class="absolute -top-32 -left-40 w-[600px] h-[600px] bg-gradient-to-tr from-indigo-500 via-purple-500 to-pink-500 rounded-full opacity-20 blur-[120px] animate-spin-slow">
    </div>
    <div
      class="absolute -bottom-32 -right-40 w-[600px] h-[600px] bg-gradient-to-br from-pink-500 via-indigo-500 to-purple-500 rounded-full opacity-20 blur-[120px] animate-spin-slower">
    </div>
  </div>

  <!-- Shine Overlay -->
  <div class="absolute inset-0 z-10 pointer-events-none">
    <div
      class="w-full h-full bg-gradient-to-br from-white/5 via-transparent to-white/5 animate-shimmer opacity-5 blur-2xl">
    </div>
  </div>

  <div class="relative z-20 max-w-7xl w-full px-6 flex flex-col md:flex-row items-center gap-16">
    <div class="flex-1 text-center md:text-left space-y-6">
      <h1
        class="text-5xl md:text-7xl font-extrabold leading-tight pb-2 pt-36 md:pt-0 text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400"
        data-aos="fade-down" data-aos-delay="100">
        Cześć, jestem Szymon
      </h1>
      <p class="text-lg text-secondary tracking-wide" data-aos="fade-right" data-aos-delay="200">
        Fullstack Developer | Web & Mobile App Designer
      </p>
      <p class="text-xl text-secondary max-w-xl mx-auto md:mx-0 leading-relaxed" data-aos="fade-right"
        data-aos-delay="300">
        Buduję nowoczesne, dopracowane aplikacje internetowe i mobilne. Interfejs, animacje, technologia i wrażenia
        użytkownika — wszystko ma znaczenie.
      </p>
      <div class="pt-4" data-aos="fade-up" data-aos-delay="500">
        <a href="#contact"
          class="inline-block bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-semibold py-3 px-6 rounded-xl shadow-lg transition-all duration-300 relative overflow-hidden">
          <span class="relative z-10">Nawiążmy kontakt</span>
          <span class="absolute inset-0 bg-white opacity-5 group-hover:opacity-10 transition"></span>
        </a>
      </div>
    </div>
    <div class="flex-1 flex justify-center mb-12 md:mb-0" data-aos="zoom-in-up" data-aos-delay="700">
      <div class="relative group perspective">
        <div class="relative w-80 h-80 rounded-3xl overflow-hidden">
          <!-- Main Image -->
          <img src="{{ url_for('static', filename='myphoto.jpeg') }}" alt="Avatar"
            class="absolute inset-0 w-full h-full object-cover rounded-3xl shadow-[0_25px_50px_-15px_rgba(99,102,241,0.5)] border-4 border-indigo-500/30 
                      transition duration-700 ease-in-out transform group-hover:scale-105 group-hover:rotate-[1deg] group-hover:-translate-y-1" />

          <!-- Reflection -->
          <div
            class="absolute bottom-0 left-0 w-full h-full bg-gradient-to-t from-white/10 to-transparent transform scale-y-[-1] opacity-20 pointer-events-none">
          </div>

          <!-- Glow Layer -->
          <div class="absolute inset-0 rounded-3xl border border-white/10 group-hover:border-indigo-400 transition">
          </div>

          <!-- Extra Glow -->
          <div
            class="absolute inset-0 z-[-1] rounded-3xl blur-3xl opacity-40 scale-110 bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 group-hover:opacity-60 transition duration-700">
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  html {
    --bg: #0f172a;
    --text-primary: #e2e8f0;
    --text-secondary: #cbd5e1;
    --accent: #6366f1;
    --bg-glow: rgba(99, 102, 241, 0.3);
    --text-section-dark: #e2e8f0;
  }

  html.light {
    --bg: #f8fafc;
    --text-primary: #0f172a;
    --text-secondary: #475569;
    --accent: #6366f1;
    --bg-glow: rgba(99, 102, 241, 0.1);
    --text-section-dark: #ffffff;
  }

  body {
    background-color: var(--bg);
    color: var(--text-primary);
    transition: background-color 0.5s, color 0.5s;
  }

  .text-primary {
    color: var(--text-primary);
  }

  .text-secondary {
    color: var(--text-secondary);
  }

  .bg-glow {
    background-color: var(--bg-glow);
  }

  .accent {
    color: var(--accent);
  }

  @keyframes spin-slow {
    0% {
      transform: rotate(0deg);
    }

    100% {
      transform: rotate(360deg);
    }
  }

  @keyframes spin-slower {
    0% {
      transform: rotate(360deg);
    }

    100% {
      transform: rotate(0deg);
    }
  }

  @keyframes shimmer {
    0% {
      transform: translateX(-100%);
    }

    100% {
      transform: translateX(100%);
    }
  }

  .animate-spin-slow {
    animation: spin-slow 60s linear infinite;
  }

  .animate-spin-slower {
    animation: spin-slower 120s linear infinite;
  }

  .animate-shimmer {
    animation: shimmer 8s linear infinite;
  }

  html,
  body,
  section,
  h1,
  h2,
  h3,
  p,
  a {
    transition: background-color 0.4s ease, color 0.4s ease, border-color 0.4s ease;
  }

  html {
    --text-section: #cbd5e1;
  }

  html.light {
    --text-section: #334155;
  }

  .text-section {
    color: var(--text-section);
  }

  .text-section-dark {
    color: var(--text-section-dark);
  }

  /* Make nav links reliably dark in light mode */
  html.light #navMenu a,
  html.light #mobileMenu a {
    color: #1e293b; /* slate-800 */
  }

  html.light #navMenu a:hover,
  html.light #mobileMenu a:hover {
    color: #6366f1; /* Tailwind indigo-500 */
  }

  #navMenu a.active,
  #mobileMenu a.active {
    color: #818cf8; /* jasny indygo (Tailwind indigo-400) */
    font-weight: 600;
    border-bottom: 2px solid #818cf8;
    padding-bottom: 2px;
    transition: color 0.3s ease;
  }
  html.light #navToggle svg {
    color: #1e293b; /* slate-800 */
  }
</style>

<!-- O mnie -->
<section id="about"
  class="py-28 bg-gradient-to-br from-slate-900/70 via-slate-800/80 to-slate-900/70 backdrop-blur-xl border-t border-white/5 relative overflow-hidden isolate">

  <div class="relative z-10 max-w-5xl mx-auto px-6 text-center space-y-10">
    <h2
      class="text-4xl md:text-5xl font-bold leading-tight pb-2 text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400"
      data-aos="fade-up">
      Kim jestem?
    </h2>
    <p class="text-lg md:text-xl text-section-dark leading-relaxed max-w-3xl mx-auto" data-aos="fade-up"
      data-aos-delay="150">
      Nazywam się <span class="text-indigo-400 font-semibold">Szymon Sowiński</span> i specjalizuję się w tworzeniu
      nowoczesnych, wysokiej jakości aplikacji internetowych oraz mobilnych.
      Moim celem jest łączenie estetyki, technologii i intuicyjnego doświadczenia użytkownika.
    </p>
    <p class="text-lg md:text-xl text-section-dark leading-relaxed max-w-3xl mx-auto" data-aos="fade-up"
      data-aos-delay="250">
      Pracuję z wieloma technologiami: <span class="text-indigo-300">Python, Flask, React, React Native, JavaScript,
        Kotlin, Java, PHP, SQL</span> i więcej.
      Uwielbiam projektować systemy od podstaw – zarówno od strony kodu, jak i wizualnego doświadczenia.
    </p>
    <p class="text-lg md:text-xl text-section-dark leading-relaxed max-w-3xl mx-auto" data-aos="fade-up"
      data-aos-delay="350">
      Wierzę, że najlepsze rozwiązania powstają na styku technologii i designu – i dokładnie tam działa mój kod.
    </p>
  </div>
</section>

<!-- Projekty -->
<section id="projects" class="relative py-28 bg-[var(--bg)] overflow-hidden isolate">
  <!-- Tło dekoracyjne -->
  <div
    class="absolute -top-32 -left-32 w-[500px] h-[500px] bg-gradient-to-tr from-indigo-500 via-purple-500 to-pink-500 rounded-full opacity-10 blur-[120px] animate-spin-slow">
  </div>
  <div
    class="absolute -bottom-32 -right-32 w-[500px] h-[500px] bg-gradient-to-br from-pink-500 via-indigo-500 to-purple-500 rounded-full opacity-10 blur-[120px] animate-spin-slower">
  </div>

  <div class="relative z-10 max-w-7xl mx-auto px-6">
    <h2
      class="text-4xl md:text-5xl font-bold leading-tight pb-2 text-center text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 mb-16"
      data-aos="fade-up">
      Moje projekty
    </h2>

    <div class="grid md:grid-cols-3 gap-10">
      {% for project in [
      {
      'title': 'Invoice Genius',
      'desc': 'System fakturowania z generowaniem PDF i obsługą danych klientów.',
      'github': 'https://github.com/szymon-sowinski/Invoice-Genius'
      },
      {
      'title': 'Backup Commissioner',
      'desc': 'Aplikacja do harmonogramowania backupów z autoryzacją LDAP.',
      'github': 'https://github.com/szymon-sowinski/Backup-Commissioner'
      },
      {
      'title': 'Sklep',
      'desc': 'Prosty sklep internetowy z koszykiem i podsumowaniem zamówień.',
      'github': 'https://github.com/szymon-sowinski/MiniSklep'
      },
      {
      'title': 'Auth-Login Firebase',
      'desc': 'Logowanie użytkowników przy użyciu Firebase Authentication.',
      'github' : 'https://github.com/szymon-sowinski/Auth-login-Firebase'
      },
      {
      'title': 'Kalkulator spalania',
      'desc': 'Aplikacja do obliczania spalania paliwa i kosztów przejazdu.',
      'github' : 'https://github.com/szymon-sowinski/Kalkulator-spalania'
      },
      {
      'title': 'Form Login',
      'desc': 'Formularz logowania z walidacją i symulacją sesji.',
      'github' : 'https://github.com/szymon-sowinski/FormLogin'
      }
      ] %}
      <div
        class="relative bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md shadow-xl group hover:shadow-2xl transition-all duration-300"
        data-aos="zoom-in-up" data-aos-delay="{{ loop.index * 100 }}">
        <div
          class="absolute -inset-px bg-gradient-to-r from-indigo-500/20 to-purple-500/20 rounded-2xl blur-[4px] opacity-0 group-hover:opacity-100 transition duration-500">
        </div>
        <div class="relative z-10 space-y-4">
          <h3 class="text-xl font-semibold text-indigo-300 group-hover:text-emerald-400 transition">{{ project.title }}
          </h3>
          <p class="text-sm text-secondary">{{ project.desc }}</p>
          <a href="{{ project.github }}" target="_blank"
            class="inline-flex items-center text-sm font-medium text-indigo-400 hover:text-indigo-300 transition group-hover:underline">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 fill-current" viewBox="0 0 24 24">
              <path
                d="M12 .5C5.648.5.5 5.648.5 12c0 5.092 3.292 9.395 7.86 10.919.574.104.784-.25.784-.553 0-.273-.01-1.174-.016-2.129-3.2.695-3.877-1.54-3.877-1.54-.522-1.328-1.275-1.683-1.275-1.683-1.042-.712.08-.698.08-.698 1.154.081 1.76 1.184 1.76 1.184 1.024 1.753 2.688 1.247 3.342.954.104-.741.4-1.247.727-1.534-2.553-.29-5.238-1.276-5.238-5.678 0-1.253.448-2.277 1.182-3.079-.12-.29-.512-1.46.112-3.042 0 0 .964-.31 3.16 1.175a10.985 10.985 0 012.88-.387c.976.004 1.96.131 2.88.387 2.192-1.485 3.154-1.175 3.154-1.175.626 1.582.234 2.752.114 3.042.736.802 1.18 1.826 1.18 3.079 0 4.412-2.692 5.384-5.258 5.668.412.354.776 1.053.776 2.122 0 1.534-.014 2.77-.014 3.145 0 .306.206.663.79.552C20.714 21.393 24 17.09 24 12c0-6.352-5.148-11.5-12-11.5z" />
            </svg>
            Zobacz na GitHubie
          </a>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Kontakt -->
<section id="contact"
  class="relative py-28 bg-gradient-to-br from-slate-900/70 via-slate-800/80 to-slate-900/70 backdrop-blur-xl border-t border-white/5 text-center overflow-hidden isolate">
  <!-- Tło dekoracyjne -->
  <div
    class="absolute -top-40 -left-32 w-[500px] h-[500px] bg-gradient-to-tr from-indigo-500 via-purple-500 to-pink-500 opacity-10 blur-[100px] animate-spin-slow">
  </div>
  <div
    class="absolute -bottom-40 -right-32 w-[500px] h-[500px] bg-gradient-to-bl from-pink-500 via-indigo-500 to-purple-500 opacity-10 blur-[100px] animate-spin-slower">
  </div>

  <div class="relative z-10 max-w-2xl mx-auto px-6 space-y-8">
    <h2
      class="text-4xl md:text-5xl font-bold leading-tight pb-2 text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400"
      data-aos="fade-up">
      Skontaktuj się
    </h2>
    <p class="text-lg md:text-xl text-section-dark leading-relaxed" data-aos="fade-up" data-aos-delay="150">
      Masz pomysł, pytanie lub chcesz po prostu porozmawiać o projekcie? Napisz do mnie – chętnie odpowiem!
    </p>

    <div data-aos="zoom-in" data-aos-delay="300">
      <a href="mailto:szymonsowinski2018@gmail.com"
        class="inline-flex items-center gap-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white text-base font-semibold py-3 px-7 rounded-xl shadow-lg transition-all duration-300 relative overflow-hidden group">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 fill-current text-white" viewBox="0 0 24 24">
          <path
            d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 2l-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z" />
        </svg>
        <span class="relative z-10">szymonsowinski2018@gmail.com</span>
        <span class="absolute inset-0 bg-white opacity-5 group-hover:opacity-10 transition"></span>
      </a>
    </div>
  </div>
</section>

<div id="themeTooltip"
  class="fixed bottom-[90px] right-6 z-50 px-3 py-2 text-sm text-white bg-black/70 backdrop-blur-md rounded-lg shadow-md transition-opacity duration-500 opacity-0 pointer-events-none">
  Zmień motyw
</div>

<button id="themeToggle"
  class="fixed bottom-6 right-6 z-50 w-14 h-14 bg-white/10 backdrop-blur-xl border border-white/20 rounded-full shadow-lg transition-all duration-300 ease-in-out hover:scale-110 hover:bg-white/20 hover:border-indigo-400 hover:shadow-2xl group perspective overflow-hidden">
  <div class="w-full h-full flex items-center justify-center transition-transform duration-700 group-[.light]:rotate-y-180 [transform-style:preserve-3d]">
    <div class="absolute w-10 h-10 rounded-full transition-colors duration-500 bg-indigo-400 group-[.light]:bg-yellow-400 z-[-1]"></div>
    <!-- Sun -->
    <div class="absolute inset-0 flex items-center justify-center text-yellow-400 text-xl [backface-visibility:hidden]">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 fill-current" viewBox="0 0 24 24">
        <path
          d="M12 4.75a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V5.5A.75.75 0 0112 4.75zM12 15.5a3.5 3.5 0 100-7 3.5 3.5 0 000 7zM4.75 12a.75.75 0 01.75-.75h1.5a.75.75 0 010 1.5H5.5a.75.75 0 01-.75-.75zM18.25 12a.75.75 0 01.75-.75h1.5a.75.75 0 010 1.5h-1.5a.75.75 0 01-.75-.75zM7.47 7.47a.75.75 0 011.06 0l1.06 1.06a.75.75 0 11-1.06 1.06L7.47 8.53a.75.75 0 010-1.06zM15.41 15.41a.75.75 0 011.06 0l1.06 1.06a.75.75 0 11-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06z" />
      </svg>
    </div>
    <!-- Moon -->
    <div
      class="absolute inset-0 flex items-center justify-center text-white text-xl rotate-y-180 [backface-visibility:hidden]">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 fill-current" viewBox="0 0 24 24">
        <path
          d="M12 2a9.956 9.956 0 00-7.071 2.929A10.005 10.005 0 1012 2z" />
      </svg>
    </div>
  </div>
</button>

<script>
  const toggle = document.getElementById('themeToggle');
  const tooltip = document.getElementById('themeTooltip');

  let tooltipVisible = false;

  toggle.addEventListener('mouseenter', () => {
    tooltip.classList.remove('opacity-0');
    tooltip.classList.add('opacity-100');
  });

  toggle.addEventListener('mouseleave', () => {
    tooltip.classList.remove('opacity-100');
    tooltip.classList.add('opacity-0');
  });

  toggle.addEventListener('click', () => {
  const root = document.documentElement;
  root.classList.toggle('light');
  toggle.classList.toggle('light');

  tooltip.classList.remove('opacity-100');
  tooltip.classList.add('opacity-0');
});

  // Navbar hamburger menu
  const navToggle = document.getElementById('navToggle');
  const mobileMenu = document.getElementById('mobileMenu');

  navToggle.addEventListener('click', () => {
    const links = mobileMenu.querySelectorAll('a');
    if (mobileMenu.classList.contains('hidden')) {
      mobileMenu.classList.remove('hidden');
      // Animate links in
      links.forEach(link => {
        link.classList.remove('opacity-0', 'translate-y-4');
        link.classList.add('opacity-100', 'translate-y-0');
      });
      mobileMenu.style.maxHeight = mobileMenu.scrollHeight + 'px';
      requestAnimationFrame(() => {
        mobileMenu.classList.remove('scale-95', 'opacity-0');
        mobileMenu.classList.add('scale-100', 'opacity-100');
      });
    } else {
      // Animate links out
      links.forEach(link => {
        link.classList.remove('opacity-100', 'translate-y-0');
        link.classList.add('opacity-0', 'translate-y-4');
      });
      mobileMenu.style.maxHeight = '0px';
      mobileMenu.classList.remove('scale-100', 'opacity-100');
      mobileMenu.classList.add('scale-95', 'opacity-0');
      mobileMenu.addEventListener('transitionend', () => {
        mobileMenu.classList.add('hidden');
      }, { once: true });
    }
  });

const sections = document.querySelectorAll('section[id]');
const navLinks = document.querySelectorAll('#navMenu a, #mobileMenu a');

function activateMenuOnScroll() {
  let scrollY = window.pageYOffset;
  let windowHeight = window.innerHeight;
  let docHeight = document.body.offsetHeight;

  sections.forEach(current => {
    const sectionHeight = current.offsetHeight;
    const sectionTop = current.offsetTop - 50; // smaller offset for earlier activation
    const sectionId = current.getAttribute('id');

    if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
      navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${sectionId}`) {
          link.classList.add('active');
        }
      });
    }
  });

  // If scrolled to bottom, activate last nav link (Kontakt)
  if ((window.innerHeight + scrollY) >= (docHeight - 5)) {
    navLinks.forEach(link => link.classList.remove('active'));
    navLinks[navLinks.length - 1].classList.add('active');
  }
}

window.addEventListener('scroll', activateMenuOnScroll);
activateMenuOnScroll();
</script>

{% endblock %}